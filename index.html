<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline';">
  <title>HYPERCORTEX ‚Äì wybierz sesjƒô</title>
  <style>
    :root { color-scheme: dark; }
    body  { margin:0; padding:40px 5%; font-family:system-ui, sans-serif; background:#000; color:#fff; }
    h1    { margin:0 0 30px; font-size:2.2rem; }
    h2    { margin:40px 0 10px; font-size:1.3rem; }
    ul    { list-style:none; padding:0; display:flex; flex-wrap:wrap; gap:12px; }
    li a  { display:inline-block; padding:12px 18px; background:#111; border:1px solid #333;
            border-radius:6px; text-decoration:none; color:#fff; font-size:0.95rem; }
    li a:hover { background:#222; }
  </style>
</head>
<body>
  <h1>üß† HYPERCORTEX</h1>
  <div id="root">≈Åadowanie‚Ä¶</div>

<script>
const CAT_FILE  = 'categories.json';  // mo≈ºesz zmieniƒá nazwƒô / ≈õcie≈ºkƒô
const SESS_PATH = 'sessions/';        // prefiks doklejany do linku ?session=

fetch(CAT_FILE)
  .then(r=>r.json())
  .then(render)
  .catch(err=>{ document.getElementById('root').textContent='Nie mogƒô odczytaƒá categories.json'; console.error(err); });

function render(data){
  const root = document.getElementById('root');
  root.innerHTML = '';
  data.categories.forEach(cat=>{
    root.insertAdjacentHTML('beforeend', `<h2>${cat.icon} ${cat.name}</h2>`);
    const ul = document.createElement('ul');
    cat.sessions.forEach(file=>{
      const nice = file.replace(/\.json$/,'').replace(/[-_.]/g,' ').replace(/[ŒõŒ£Œ©]/g,'').trim();
      ul.insertAdjacentHTML('beforeend',
        `<li><a href="session.html?session=${encodeURIComponent(SESS_PATH+file)}">${nice}</a></li>`);
    });
    root.appendChild(ul);
  });
}
</script>
</body>
</html>
